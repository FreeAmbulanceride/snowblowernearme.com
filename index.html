<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Snow blowers near <span data-city>your area</span> — in stock & ready</title>
  <meta name="description" content="Quick compare of the best single- and two-stage snow blowers, plus fast rental/repair. Neutral visuals, no scraped prices—click to check live availability." />
  <link rel="preconnect" href="https://www.amazon.com">
  <link rel="preconnect" href="https://www.amazon.ca">
  <link rel="stylesheet" href="/assets/styles.css?v=20251001a" />
</head>
<body>

<!-- Storm banner (shown via JS when 8cm snow is forecast) -->
<div id="storm" class="storm">⚠️ 8cm+ snow forecast in your area — order early to avoid stockouts.</div>

<header class="header">
  <div class="container bar">
    <a class="brand" href="/"><img src="/assets/logo.svg" alt="" /><span>snowblowernearme.com</span></a>
    <nav class="nav">
      <a href="/gravel/">Gravel</a>
      <a href="/quiet-battery/">Quiet/Battery</a>
      <a href="/steep-driveways/">Steep/Long</a>
      <a href="/privacy.html">Privacy</a>
      <a href="/terms.html">Terms</a>
    </nav>
  </div>
  
</header>

<main class="container section" id="main">
  <section class="hero">
    <h1>Snow blowers near <span data-city>your area</span> — in stock &amp; ready</h1>
    <p>Quick compare of the best single- and two-stage options, plus fast rental/repair. Neutral visuals, no scraped prices—click through for live availability.</p>
    <div class="actions">
      <a class="btn btn--primary" href="#top">See top picks</a>
      <a class="btn btn--ghost" href="#local">Request local rental/repair</a>
    </div>
  </section>

  <p class="small center">Updated <time datetime="2025-09-30">September 30, 2025</time> · Tested for heavy/wet snow & powder. Routing sends you to the right Amazon store with the correct tag.</p>

  <section id="top" class="section">
    <h2 class="small" style="letter-spacing:.2px; text-transform:uppercase; opacity:.9">Today’s Top Picks</h2>
    <div class="grid" id="top-grid">
      <!-- Card 1 -->
      <article class="card">
        <div class="thumb"><img src="/assets/picks/ariens.png" alt="Ariens Classic 24&quot;" loading="lazy" width="640" height="400"></div>
        <h3>Ariens Classic 24" — two-stage workhorse</h3>
        <div class="meta">
          <span class="tag">24" width</span><span class="tag">two-stage</span><span class="tag">steel auger</span><span class="tag">self-propelled</span>
        </div>
        <ul class="pros">
          <li>Chews through deep, wet snow; safer on gravel.</li>
          <li>Good US/Canada parts availability.</li>
        </ul>
        <a class="btn btn--primary cta" data-id="ariens-classic-24" rel="sponsored nofollow noopener" target="_blank">Check price on Amazon →</a>
      </article>

      <!-- Card 2 -->
      <article class="card">
        <div class="thumb"><img src="/assets/picks/ego.png" alt="EGO Power+ 21&quot;" loading="lazy" width="640" height="400"></div>
        <h3>EGO Power+ 21" — quiet single-stage electric</h3>
        <div class="meta">
          <span class="tag">21" width</span><span class="tag">single-stage</span><span class="tag">battery</span>
        </div>
        <ul class="pros">
          <li>Low noise, low maintenance; instant starts in cold.</li>
        </ul>
        <a class="btn btn--primary cta" data-id="ego-powerplus-21" rel="sponsored nofollow noopener" target="_blank">Check price on Amazon →</a>
      </article>

      <!-- Card 3 -->
      <article class="card">
        <div class="thumb"><img src="/assets/picks/toro.png" alt="Budget 24&quot; Two-Stage" loading="lazy" width="640" height="400"></div>
        <h3>Budget 24" Two-Stage — starter value</h3>
        <div class="meta"><span class="tag">24" width</span><span class="tag">two-stage</span><span class="tag">starter</span></div>
        <ul class="pros"><li>Affordable step into two-stage power; good for moderate snowfall.</li></ul>
        <a class="btn btn--primary cta" data-id="budget-24-two-stage" rel="sponsored nofollow noopener" target="_blank">Check price on Amazon →</a>
      </article>
    </div>

    <!-- Compare table -->
    <div class="table">
      <table>
        <thead><tr><th>Model</th><th>Stage</th><th>Width</th><th>Best for</th><th>Link</th></tr></thead>
        <tbody>
          <tr><td>Ariens Classic 24"</td><td>Two-stage</td><td>24"</td><td>Deep/wet snow, gravel</td><td><a class="cta" data-id="ariens-classic-24" rel="sponsored nofollow noopener" target="_blank">Check availability</a></td></tr>
          <tr><td>EGO Power+ 21"</td><td>Single-stage (battery)</td><td>21"</td><td>Paved, low noise</td><td><a class="cta" data-id="ego-powerplus-21" rel="sponsored nofollow noopener" target="_blank">Check availability</a></td></tr>
          <tr><td>Budget 24" Two-Stage</td><td>Two-stage</td><td>24"</td><td>Starter value</td><td><a class="cta" data-id="budget-24-two-stage" rel="sponsored nofollow noopener" target="_blank">Check availability</a></td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="local" class="section">
    <h2 class="small" style="letter-spacing:.2px; text-transform:uppercase; opacity:.9">Find local rental or repair</h2>
    <p class="small">Need a rental today or fast repair? Use our form — we’ll route you to official store/service options in your area.</p>
    <p><a class="btn btn--ghost" href="https://forms.gle/WNYyVcStumA9eDiE7" target="_blank" rel="noopener">Open request form</a></p>
  </section>
</main>

<footer class="footer">
  <div class="container row">
    <p class="small">As an Amazon Associate, any qualifying earnings from this page go directly to supporting this website.</p>
    <nav><a href="/privacy.html">Privacy</a><a href="/terms.html">Terms</a><a href="/sitemap.xml">Sitemap</a></nav>
  </div>
</footer>

<!-- Your existing JS for routing/analytics -->
<script type="module">
  import { wireCTAs } from '/js/link-resolver.js?v=3';
  wireCTAs();
</script>

<!-- Storm logic: show banner if forecast >= 8cm (mock hook – call your weather check and toggle .show) -->
<script>
/**
 * Storm ribbon: show if forecast snowfall ≥ 8 cm in the next 48h.
 * Uses Open-Meteo (no key, CORS-enabled). Caches results for 3 hours.
 * Graceful fallbacks: cached city → geolocation (with permission) → bail.
 */
(function stormRibbon(){
  const BANNER      = document.getElementById('storm');
  const CACHE_KEY   = 'sbnm_storm_v1';
  const CITY_KEY    = 'sbnm_city_v1'; // {display, lat, lon} (optional)
  const THRESHOLD_CM= 8;              // show when >= 8 cm
  const TTL_MS      = 3 * 60 * 60 * 1000; // 3 hours

  if (!BANNER) return;

  // 1) Try cached decision first
  try {
    const cached = JSON.parse(localStorage.getItem(CACHE_KEY)||'null');
    if (cached && Date.now() - cached.t < TTL_MS) {
      if (cached.show) BANNER.classList.add('show');
      return;
    }
  } catch(_) {}

  // 2) Get a lat/lon
  function round2(n){ return Math.round(n*100)/100; }
  function fromCachedCity(){
    try {
      const cc = JSON.parse(localStorage.getItem(CITY_KEY)||'null');
      if (cc && typeof cc.lat==='number' && typeof cc.lon==='number') {
        return {lat:cc.lat, lon:cc.lon, label:cc.display||'your area'};
      }
    } catch(_) {}
    return null;
  }
  function fromGeo(){
    return new Promise((resolve,reject)=>{
      if (!navigator.geolocation) return reject(new Error('no-geo'));
      navigator.geolocation.getCurrentPosition(
        p=>resolve({lat:round2(p.coords.latitude), lon:round2(p.coords.longitude)}),
        reject,
        {timeout:5000, maximumAge:600000}
      );
    });
  }

  (async function run(){
    let loc = fromCachedCity();
    if (!loc) {
      try { loc = await fromGeo(); } catch(_) {}
    }
    if (!loc) {
      // No location → cache a "no show" for TTL and exit
      try { localStorage.setItem(CACHE_KEY, JSON.stringify({t:Date.now(), show:false})); }catch(_){}
      return;
    }

    // 3) Query Open-Meteo for hourly snowfall (cm)
    // Docs: https://api.open-meteo.com/v1/forecast
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${encodeURIComponent(loc.lat)}&longitude=${encodeURIComponent(loc.lon)}&hourly=snowfall&forecast_days=2&timezone=auto`;
    let show = false;
    try{
      const res = await fetch(url, {headers:{'Accept':'application/json'}});
      if (res.ok) {
        const data = await res.json();
        const arr = (data && data.hourly && data.hourly.snowfall) || [];
        // Sum next 48h snowfall
        const total = arr.slice(0, 48).reduce((s,v)=>s + (Number(v)||0), 0);
        show = total >= THRESHOLD_CM;
      }
    }catch(_){ /* network fail → don’t show */ }

    // 4) Apply + cache
    if (show) BANNER.classList.add('show');
    try { localStorage.setItem(CACHE_KEY, JSON.stringify({t:Date.now(), show})); }catch(_){}
  })();
})();
</script>

<script>
/**
 * Light city resolver (uses previously-saved city or geolocation label).
 * Updates the H1 <span data-city> and the <title>.
 */
(function cityTitle(){
  const CITY_KEY = 'sbnm_city_v1'; // expect {display, lat, lon}
  const citySpan = document.querySelector('[data-city]');
  const BASE_TITLE = 'Snow blowers near {CITY} — in stock & ready';

  function setCityLabel(label){
    if (label && citySpan) citySpan.textContent = label;
    const t = BASE_TITLE.replace('{CITY}', label || 'your area');
    document.title = t;
  }

  // 1) Cached
  try{
    const cached = JSON.parse(localStorage.getItem(CITY_KEY)||'null');
    if (cached && cached.display) {
      setCityLabel(cached.display);
      return;
    }
  }catch(_){}

  // 2) Geolocation best-effort label (approx; avoid reverse-geocode complexity here)
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      ()=> setCityLabel('your area'), // keep generic unless you have reverse-geocode
      ()=> setCityLabel('your area'),
      {timeout:4000, maximumAge:600000}
    );
  } else {
    setCityLabel('your area');
  }
})();
</script>


</body>
</html>
